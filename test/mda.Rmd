---
title: "mda"
output: html_document
---

```{r setup, include=FALSE}
knitr::opts_chunk$set(echo = TRUE)

library(netrb)
library(pbmcapply)
```

```{r}
# k <- 1e4
# sm1 <- function(n1) mean(sample(1:k, n1, replace = TRUE))
sm1 <- function(n1) mean(rnorm(n1))
sm2 <- function(n2, n1) mean(unlist(sapply(rep(n1, n2), sm1)))
sm3 <- function(n3, n2, n1) {
  mean(unlist(sapply(rep(n2, n3), sm2, n1 = n1)))
}
sm4 <- function(n4, n3, n2, n1) {
  var(unlist(sapply(rep(n3, n4), sm3, n2 = n2, n1 = n1)))
}
# x <- seq(1, 10, length.out = 20)
x <- seq(1e2, 1e3, length.out = 100)
y <- unlist(pbmclapply(x, sm4, n3 = 2, n2 = 2, n1 = 2, mc.cores = detectCores() - 1))
plot(x, y, type = 'l')
```

```{r}

```
```{r}
var(rnorm(100))
```

